<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: rails | Weichien Hung's studying note]]></title>
  <link href="http://weichienhung.github.io/blog/categories/rails/atom.xml" rel="self"/>
  <link href="http://weichienhung.github.io/"/>
  <updated>2013-09-09T23:00:49+08:00</updated>
  <id>http://weichienhung.github.io/</id>
  <author>
    <name><![CDATA[Weichien Hung]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rails and heroku]]></title>
    <link href="http://weichienhung.github.io/blog/2013/09/09/rails-and-heroku/"/>
    <updated>2013-09-09T22:32:00+08:00</updated>
    <id>http://weichienhung.github.io/blog/2013/09/09/rails-and-heroku</id>
    <content type="html"><![CDATA[<p>I push <a href="https://github.com/weichienhung/rails101_groupme">rails101_groupme</a> to <a href="http://weichien-groupme.herokuapp.com/">heroku</a> today.
The project doesn't have access control and i18n. I use cancan gem to do access authorization and default i18n mechanism.
Besides, i also upgrade twitter bootstrap to 3.0.0.</p>

<!-- more -->


<p>When i push to heroku, i get stuck in ckeditor's rails 4 compatibility and git issue. After googling i solve it finally.</p>

<h3>Fail to fetch gem from git</h3>

<p>Error message like this
<code>
Fetching git@github.com:Compass/compass-rails.git
Host key verification failed.
fatal: The remote end hung up unexpectedly
Git error: command `git clone 'git@github.com:Compass/compass-rails.git' "/tmp/build_1xa9
</code>
Because git@github.com use SSH to communication, it requires authentication.
Your gemfile may contain some gems like
<code>ruby Old
gem "compass-rails", :git =&gt; "git@github.com:Compass/compass-rails.git", :branch =&gt; "rails4"
</code>
Change to
<code>ruby New
gem "compass-rails", :github =&gt; "Compass/compass-rails", :branch =&gt; "rails4"
</code></p>

<h3>Miss assets in rails 4</h3>

<p>Very helpful <a href="http://theotherzach.com/writes/2013/3/13/rails-4-and-heroku-missing-assets">link</a>. Put below in your production.rb
<code>ruby production.rb
...
config.serve_static_assets = true
...
</code></p>

<h3>Ckeditor doesn't show correctly</h3>

<p>Reference to <a href="http://www.cnblogs.com/lmei/p/3306643.html">link</a> and <a href="http://dev.mensfeld.pl/2013/07/upgrading-to-rails-4-0-from-rails-3-2-test-case-part-ii-assets-models/">link2</a>.
Because ckeditor will read the assets file without digest postfix. My solution is<br/>
Add a rake file to create nondigest file of all ckeditor assets.
``` ruby ckeditor.rake
require 'fileutils'
desc "Create nondigest versions of all ckeditor digest assets"
task ckeditor: :environment do
  fingerprint = /-[0-9a-f]{32}./
  for file in Dir["public/assets/ckeditor/<em>*/</em>"]</p>

<pre><code>next unless file =~ fingerprint
nondigest = file.sub fingerprint, '.'
FileUtils.cp file, nondigest, verbose: true
</code></pre>

<p>  end
end
<code>
Execute `rake ckeditor` after `rake assets:precompile`
</code> sh
rake assets:precompile
rake ckeditor
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[First ember_rails project]]></title>
    <link href="http://weichienhung.github.io/blog/2013/09/03/first-ember-rails-project/"/>
    <updated>2013-09-03T23:57:00+08:00</updated>
    <id>http://weichienhung.github.io/blog/2013/09/03/first-ember-rails-project</id>
    <content type="html"><![CDATA[<p>Last time i said i want to make an ember-rails project(<a href="http://127.0.0.1:4000/blog/2013/08/25/rails-and-ember-study/">post</a>).
Today I push my first Ember-Rails(food-ntpc) project to <a href="https://github.com/weichienhung/food-ntpc">github</a> and <a href="http://food-ntpc.herokuapp.com/">heroku</a>.
It takes me more time to finish it because i am not familiar with coffee script. I also create a new <a href="http://weichienhung.github.io/blog/2013/09/01/coffee-script-memo/">post</a> for coffee script memo.
During practicing i use Emberjs 1.0.0.rc7. But Emberjs 1.0.0 was released few days ago and i upgrade it to 1.0.0.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rails and ember study]]></title>
    <link href="http://weichienhung.github.io/blog/2013/08/25/rails-and-ember-study/"/>
    <updated>2013-08-25T07:13:00+08:00</updated>
    <id>http://weichienhung.github.io/blog/2013/08/25/rails-and-ember-study</id>
    <content type="html"><![CDATA[<p>I pushed two project(<a href="https://github.com/weichienhung/rails101_groupme">rails101-groupme</a>,<a href="https://github.com/weichienhung/project101">project101</a>)to github yesterday.
I bought the ebook <a href="http://rails-101.logdown.com/">rails101</a> and make rails101-groupme project by follow instructions of book.
Besides i add some features into rails101-groupme.<br/>
1.Every user could reply the post<br/>
2.Rich text editor, CKeditor</p>

<p><a href="https://github.com/weichienhung/project101">project101</a> is the old project i practiced emberjs. It retrieves data from <a href="http://data.taipei.gov.tw/">open data Taipei</a> and show on table.
This project was made because inspired by yunglinho's <a href="http://blog.yunglinho.com/blog/2011/11/15/">post</a>. I study google map API and add into it recently.
Most of locations could be show on google map. Somes are not because can't be geocode to <a href="https://developers.google.com/maps/documentation/javascript/reference#LatLng">LatLng</a>.
There's a disadvantage here. Geocode needs to send requests to google but google will block it if you use API frequently. Implement it on clide side is not a good idea.
I am planing to have a new project that use Rails and Emberjs. I could add my json API and store LatLng in database to prevent too many requests to google.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rails on heroku]]></title>
    <link href="http://weichienhung.github.io/blog/2013/08/15/rails-on-heroku/"/>
    <updated>2013-08-15T10:39:00+08:00</updated>
    <id>http://weichienhung.github.io/blog/2013/08/15/rails-on-heroku</id>
    <content type="html"><![CDATA[<p>I pushed <a href="https://github.com/weichienhung/bookmarks-rails">bookmarks-rails</a> project to <a href="https://www.heroku.com/">Heroku</a> yesterday.
Thanks to <a href="http://railsapps.github.io/rails-heroku-tutorial.html">tutorial</a> i don't have too many troblem during upload to Heroku.
Some parts of doc are out of dated and here i write down the steps for reference myself in the future.</p>

<!--more-->


<ol>
<li>install heroku toolbelt from <a href="https://toolbelt.heroku.com">heroku</a></li>
<li>heroku doesn't support sqllite3, modify sqllite3 to postgres sql
<code>ruby
gem 'sqllite3'
</code>
to
<code>
group :development, :test do
gem 'sqlite3'
end
group :production do
gem 'pg'
end
</code>
3.use <code>thin</code> as production webserver
<code>
group :production do
gem 'thin'
end
</code></li>
<li>run <code>bundle install --without production</code></li>
<li>In Rails 3.x precompile your assets file, you have to add <code>config.assets.initialize_on_precompile=false</code> to your <code>config/application.rb</code>. Rails 4 ignore this.</li>
<li>run <code>rake assets:precompile</code></li>
<li>run <code>git commit -am "your commit message"</code> because only commited source code will be pushed to heroku.</li>
<li>run <code>heroku create appname</code> to create your app on heroku. It requires you input your account,password and your ssh public key(id_rsa).</li>
<li>run <code>git push heroku master</code>. You will see your app running on http://appname.herokuapp.com.
Heroku will modify your production datbase connection in database.yml when push to heroku. You don't need to put the production setting your database.yml.</li>
<li>run <code>heroku run rake db:migrate</code> to create db on heroku</li>
</ol>


<h2>trouble shooting</h2>

<p>If you use Twitter Bootstrap, you have to comment out favicon related codes in your application.html.erb.  Or you will fail to push to heroku.
```</p>

<!--
  <%= favicon_link_tag 'apple-touch-icon-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png' %>

  <%= favicon_link_tag 'favicon.ico', :rel => 'shortcut icon' %>
-->


<p>```</p>

<p>If you modify the app name on Heroku web site, you should remove your remote branch and re-add.
```
git remote rm oldname</p>

<p>git remote add newname git@herokuapp.com:yourapp.git
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rails practice]]></title>
    <link href="http://weichienhung.github.io/blog/2013/08/11/rails-practice/"/>
    <updated>2013-08-11T12:36:00+08:00</updated>
    <id>http://weichienhung.github.io/blog/2013/08/11/rails-practice</id>
    <content type="html"><![CDATA[<p>I push my first rails project <a href="https://github.com/weichienhung/bookmarks-rails">bookmarks-rails</a> to github today. It's a very small project for practicing rails framework.
The web provide user a very simple interface to create a bookmark and basic authentication. I take free time after work to finish this project.
Thanks to ihower's <a href="http://ihower.tw/rails3/index.html">Ruby on Rails實戰聖經</a>,Yangtheman's <a href="http://blog.yangtheman.com/2012/02/09/facebook-connect-with-rails-omniauth-devise/">post</a> and <a href="https://www.codeschool.com/">Code school</a>, it helps me a lot.<br/>
I try skills in this projects<br/>
1. Twitter Bootstrap 3.0.0.rc1<br/>
2. devise account system<br/>
3. omniauth with facebook login<br/>
4. rails REST<br/>
5. RSpec<br/>
6. Capybara</p>
]]></content>
  </entry>
  
</feed>
